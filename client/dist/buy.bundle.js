"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkssps_client"] = self["webpackChunkssps_client"] || []).push([["buy"],{

/***/ "./src/scripts/buy.js":
/*!****************************!*\
  !*** ./src/scripts/buy.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n\r\nconst url = localStorage.getItem('url');\r\nconst formattingOptions = {\r\n  style: 'currency',\r\n  currency: 'VND',\r\n};\r\nconst pricePerPage = 200;\r\nconst data = [\r\n  {\r\n    page: 5,\r\n    cost: 5 * pricePerPage,\r\n  },\r\n  {\r\n    page: 10,\r\n    cost: 10 * pricePerPage,\r\n  },\r\n  {\r\n    page: 20,\r\n    cost: 20 * pricePerPage,\r\n  },\r\n  {\r\n    page: 50,\r\n    cost: 50 * pricePerPage,\r\n  },\r\n  {\r\n    page: 100,\r\n    cost: 100 * pricePerPage,\r\n  },\r\n];\r\n\r\nlet authToken;\r\n\r\nif (localStorage.getItem('userToken')) {\r\n  authToken = 'Bearer ' + localStorage.getItem('userToken');\r\n}\r\n\r\njquery__WEBPACK_IMPORTED_MODULE_0___default().ajaxSetup({\r\n  headers: {\r\n    Authorization: authToken,\r\n  },\r\n});\r\n\r\njquery__WEBPACK_IMPORTED_MODULE_0___default()(() => {\r\n  data.forEach((element) => {\r\n    const buyDiv =\r\n      `\r\n    <div class=\"flex flex-row justify-between\" id=\"buy-item\">\r\n    <div class=\"flex flex-row items-center space-x-2\">\r\n    <input\r\n    id=\"` +\r\n      element.page +\r\n      `\"\r\n    type=\"radio\"\r\n    value=\"` +\r\n      element.page +\r\n      `\"\r\n    name=\"buy-select\"\r\n    class=\"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600\"\r\n    />\r\n    <label for=\"` +\r\n      element.page +\r\n      `\">` +\r\n      element.page +\r\n      ` trang</label>\r\n    </div>\r\n    <div class=\"flex flex-row items-center space-x-2\">\r\n    <p>` +\r\n      element.cost.toLocaleString('vi-VN', formattingOptions) +\r\n      `</p>\r\n      </div>\r\n      </div>`;\r\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-item-area').append(buyDiv);\r\n  });\r\n});\r\n\r\njquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-continue').on('click', () => {\r\n  const selectedValue = jquery__WEBPACK_IMPORTED_MODULE_0___default()('input[name=\"buy-select\"]:checked').val();\r\n  const selectedPrice = (selectedValue * pricePerPage).toLocaleString(\r\n    'vi-VN',\r\n    formattingOptions,\r\n  );\r\n  if (selectedValue) {\r\n    const newDiv =\r\n      `\r\n      <p class=\"text-xl font-bold\">Mua thêm trang</p>\r\n      <p>Chọn số trang cần mua</p>\r\n      <div class=\"flex flex-row justify-between\" id=\"buy-item\">\r\n        <div class=\"flex flex-row items-center space-x-2\">\r\n          <input\r\n            disabled\r\n            checked\r\n            id=\"disabled-radio-1\"\r\n            type=\"radio\"\r\n            value=\"\"\r\n            name=\"disabled-radio\"\r\n            class=\"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600\"\r\n          />\r\n          <p>` +\r\n      selectedValue +\r\n      ` trang</p>\r\n        </div>\r\n        <div class=\"flex flex-row items-center space-x-2\">\r\n          <p>` +\r\n      selectedPrice +\r\n      ` </p>\r\n        </div>\r\n      </div>\r\n      <p>Chọn phương thức thanh toán</p>\r\n      <div class=\"flex flex-row justify-between\" id=\"buy-item\">\r\n        <div class=\"flex flex-row items-center space-x-2\">\r\n          <input\r\n            id=\"momo\"\r\n            type=\"radio\"\r\n            value=\"momo\"\r\n            name=\"payment-method\"\r\n            class=\"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600\"\r\n          />\r\n          <label for=\"momo\">MoMo</label>\r\n        </div>\r\n        <img src=\"../../assets/momo.png\" />\r\n      </div>\r\n      <div class=\"flex flex-row justify-between\" id=\"buy-item\">\r\n        <div class=\"flex flex-row items-center space-x-2\">\r\n          <input\r\n            id=\"napas\"\r\n            type=\"radio\"\r\n            value=\"napas\"\r\n            name=\"payment-method\"\r\n            class=\"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600\"\r\n          />\r\n          <label for=\"napas\">Thẻ nội địa (NAPAS)</label>\r\n        </div>\r\n        <img src=\"../../assets/napas.png\" />\r\n      </div>\r\n      <div class=\"flex flex-row justify-between\" id=\"buy-item\">\r\n        <div class=\"flex flex-row items-center space-x-2\">\r\n          <input\r\n            id=\"bkpay\"\r\n            type=\"radio\"\r\n            value=\"bkpay\"\r\n            name=\"payment-method\"\r\n            class=\"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600\"\r\n          />\r\n          <label for=\"bkpay\">SIUPay</label>\r\n        </div>\r\n        <img src=\"../../assets/moi.png\" />\r\n      </div>\r\n      <div class=\"flex w-full flex-row items-center justify-between pb-2\">\r\n        <button\r\n          type=\"button\"\r\n          id=\"buy-goback\"\r\n          class=\"items inline-flex gap-x-3 rounded-full px-6 py-2.5 text-center text-black shadow-1 transition ease-out hover:bg-button-hover hover:shadow-3 active:bg-button-active dark:bg-button-dark dark:text-dark-surface dark:hover:bg-button-hover-dark dark:active:bg-button-active-dark\"\r\n        >\r\n          Quay lại\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          id=\"checkout\"\r\n          class=\"items inline-flex gap-x-3 rounded-full bg-button-primary px-6 py-2.5 text-center text-white shadow-1 transition ease-out hover:bg-button-primary-hover hover:shadow-3 active:bg-button-primary-active dark:bg-button-primary-dark dark:hover:bg-button-primary-hover-dark dark:active:bg-button-primary-active-dark\"\r\n        >\r\n          Thanh toán\r\n        </button>\r\n      </div>\r\n      <p class=\"text-xs italic\">\r\n        Bạn sẽ được chuyển hướng sang trang web của đơn vị thanh toán để\r\n        tiếp tục. Sau khi thanh toán thành công, bạn sẽ quay trở về SSPS với\r\n        xác nhận đơn hàng của mình.\r\n      </p>\r\n    `;\r\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-pages').html(newDiv);\r\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-goback').on('click', () => {\r\n      window.location.reload();\r\n    });\r\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#checkout').on('click', () => {\r\n      const data = { increment: selectedValue };\r\n      jquery__WEBPACK_IMPORTED_MODULE_0___default().post(url + '/account/buy-credit', JSON.stringify(data))\r\n        .done(() => {\r\n          alert(Date.now()); // Hiển thị giá trị Date.now()\r\n\r\n          const checkoutDiv =\r\n            `\r\n      <p class=\"text-xl font-bold\">Mua thêm trang</p>\r\n      <p>Đơn hàng SSPS` +\r\n            Date.now() +\r\n            ` của bạn đã được xử lí thành công.</p>\r\n      <div class=\"flex flex-col space-y-2\">\r\n        <p class=\"text-sm font-bold text-gray-600\">Chi tiết</p>\r\n        <hr class=\"w-full border\" />\r\n        <div class=\"flex flex-row justify-between\">\r\n          <p>Số trang</p>\r\n          <p>` +\r\n            selectedValue +\r\n            `</p>\r\n        </div>\r\n        <div class=\"flex flex-row justify-between\">\r\n          <p>Ngày đặt đơn</p>\r\n          <p>` +\r\n            new Date().toLocaleString() +\r\n            `</p>\r\n        </div>\r\n        <div class=\"flex flex-row justify-between\">\r\n          <p>Tổng tiền</p>\r\n          <p>` +\r\n            selectedPrice +\r\n            `</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"flex w-full flex-row justify-end pb-1\">\r\n        <button\r\n          type=\"button\"\r\n          id=\"finish-checkout\"\r\n          class=\"items inline-flex gap-x-3 rounded-full bg-button-primary px-6 py-2.5 text-center text-white shadow-1 transition ease-out hover:bg-button-primary-hover hover:shadow-3 active:bg-button-primary-active dark:bg-button-primary-dark dark:hover:bg-button-primary-hover-dark dark:active:bg-button-primary-active-dark\"\r\n        >\r\n          Hoàn tất\r\n        </button>\r\n      </div>`;\r\n          jquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-pages').html(checkoutDiv);\r\n          jquery__WEBPACK_IMPORTED_MODULE_0___default()('#finish-checkout').on('click', () => {\r\n            window.location.href = 'home.html';\r\n          });\r\n        })\r\n        .fail(function (xhr, status, error) {\r\n          // console.log(xhr);\r\n          const errorCode = xhr.status;\r\n          const errorMessage = xhr.responseJSON.error.message;\r\n          window.location.href =\r\n            './error.html?num=' + errorCode + '&msg=' + errorMessage;\r\n          jquery__WEBPACK_IMPORTED_MODULE_0___default()('#error-code').html(errorCode);\r\n          jquery__WEBPACK_IMPORTED_MODULE_0___default()('#error-description').html(errorMessage);\r\n        });\r\n    });\r\n  } else {\r\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-continue').attr(\r\n      'class',\r\n      'items inline-flex gap-x-1 rounded-full bg-[#4d69b2] px-5 py-2.5 text-center text-white shadow-1 transition ease-out dark:bg-button-primary-dark cursor-not-allowed',\r\n    );\r\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-continue').attr('disabled', 'disabled');\r\n    const errorDiv = `\r\n    <div class=\"px-3 py-2 bg-red-200 dark:bg-red-900 mix-blend-multiply dark:mix-blend-lighten rounded-full flex flex-row space-x-5 items-center\" id=\"error-div\">\r\n      <svg class=\"self-center\" xmlns=\"http://www.w3.org/2000/svg\" height=\"32\" viewBox=\"0 -960 960 960\" width=\"32\">\r\n        <path fill=\"#B3261E\" d=\"M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z\"></path>\r\n      </svg>\r\n      <p>Vui lòng chọn số trang cần mua</p>\r\n    </div>\r\n    `;\r\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-pages').append(errorDiv);\r\n  }\r\n  jquery__WEBPACK_IMPORTED_MODULE_0___default()('input[type=radio][name=buy-select]').on('change', () => {\r\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-continue').attr(\r\n      'class',\r\n      'items inline-flex gap-x-3 rounded-full bg-button-primary px-6 py-2.5 text-center text-white shadow-1 transition ease-out hover:bg-button-primary-hover hover:shadow-3 active:bg-button-primary-active dark:bg-button-primary-dark dark:hover:bg-button-primary-hover-dark dark:active:bg-button-primary-active-dark',\r\n    );\r\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-continue').removeAttr('disabled');\r\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('#error-div').remove();\r\n  });\r\n});\r\n\r\njquery__WEBPACK_IMPORTED_MODULE_0___default()('#buy-cancel').on('click', () => {\r\n  window.location.href = 'home.html';\r\n});\r\n\n\n//# sourceURL=webpack://ssps-client/./src/scripts/buy.js?");

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./src/scripts/buy.js"));
/******/ }
]);