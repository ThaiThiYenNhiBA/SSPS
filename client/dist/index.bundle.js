"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkssps_client"] = self["webpackChunkssps_client"] || []).push([["index"],{

/***/ "./src/scripts/index.js":
/*!******************************!*\
  !*** ./src/scripts/index.js ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var flowbite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! flowbite */ \"./node_modules/flowbite/lib/esm/index.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _home_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./home.js */ \"./src/scripts/home.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_home_js__WEBPACK_IMPORTED_MODULE_2__]);\n_home_js__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* eslint-disable require-jsdoc */\r\n\r\n\r\n\r\nconst url = localStorage.getItem('url');\r\n\r\nclass User {\r\n  constructor(name, imageURL, remainingPages, resetDate, userType = 'student') {\r\n    this.name = name;\r\n    this.avatar = imageURL;\r\n    this.remainingPages = remainingPages;\r\n    this.resetDate = resetDate;\r\n    this.userType = userType;\r\n  }\r\n}\r\n\r\nlet authToken;\r\n\r\nif (localStorage.getItem('userToken')) {\r\n  authToken = 'Bearer ' + localStorage.getItem('userToken');\r\n}\r\n\r\njquery__WEBPACK_IMPORTED_MODULE_1___default().ajaxSetup({\r\n  headers: {\r\n    Authorization: authToken,\r\n  },\r\n  contentType: 'application/json',\r\n});\r\n\r\n/* load user info on page load */\r\njquery__WEBPACK_IMPORTED_MODULE_1___default()(() => {\r\n  if (!localStorage.getItem('userToken')) {\r\n    window.location.href = './login.html';\r\n    throw new Error('Not logged in!');\r\n  }\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default().get(url + '/account/self')\r\n    .done(function (data) {\r\n      const user = new User(\r\n        data.name,\r\n        data.profile_image,\r\n        data.credit,\r\n        '01-01-2024',\r\n        data.role,\r\n        data.token,\r\n      );\r\n      localStorage.setItem('userInfo', JSON.stringify(user));\r\n      if (data.role == 'student') {\r\n        // $('a[href^=\"manage\"]').addClass('hidden');\r\n        const item1 = document.querySelector('a[href*=\"manage\"]');\r\n        const item2 = document.querySelector('a[href*=\"report\"]');\r\n        item1.classList.add('hidden');\r\n        item2.classList.add('hidden');\r\n      }\r\n      // console.log(data);\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('[id=user-name]')\r\n        .text(user.name)\r\n        .removeClass(\r\n          'h-4 w-[75%] animate-pulse rounded-full bg-gray-300 dark:bg-gray-700',\r\n        );\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('[id=user-avatar]')\r\n        .html(\r\n          '<img class=\"h-14 w-14 aspect-square\" src=\"' + user.avatar + '\" />',\r\n        )\r\n        .removeClass('animate-pulse bg-gray-300');\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('[id=user-remaining-pages]')\r\n        .text(user.remainingPages + ' trang còn lại')\r\n        .attr('data-remaining-pages', user.remainingPages) // Lưu vào data attribute\r\n        .removeClass(\r\n          'h-3 w-[60%] animate-pulse rounded-full bg-gray-300 dark:bg-gray-700',\r\n        );\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('[id=user-remaining-pages-mobile]')\r\n        .text(user.remainingPages)\r\n        .removeClass('animate-pulse');\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('[id=user-reset-date]').text('Đặt lại vào ' + user.resetDate);\r\n      if (user.userType == 'spso') {\r\n        const userTypeDiv =\r\n          `\r\n        <div\r\n          id=\"user-type\"\r\n          class=\"rounded-lg bg-button-primary dark:bg-button-primary-dark p-1 text-xs text-white\"\r\n        >\r\n          ` +\r\n          user.userType +\r\n          `\r\n        </div>`;\r\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('[id=user-info]').append(userTypeDiv);\r\n      }\r\n      if (user.userType == 'staff') {\r\n        const userTypeDiv =\r\n          `\r\n        <div\r\n          id=\"user-type\"\r\n          class=\"rounded-lg bg-blue-secondary p-1 text-xs text-white\"\r\n        >\r\n          ` +\r\n          user.userType +\r\n          `\r\n        </div>`;\r\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('[id=user-info]').append(userTypeDiv);\r\n      }\r\n    })\r\n    .fail(function (xhr, status, error) {\r\n      console.log(xhr);\r\n      console.log(status);\r\n      const errorCode = xhr.status;\r\n      const errorMessage = xhr.responseJSON.error.message;\r\n      window.location.href =\r\n        './error.html?num=' + errorCode + '&msg=' + errorMessage;\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#error-code').html(errorCode);\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#error-description').html(errorMessage);\r\n    });\r\n});\r\n\r\nconst isDarkMode = localStorage.getItem('darkMode');\r\nif (isDarkMode == 'true') {\r\n  darkMode();\r\n} else {\r\n  lightMode();\r\n}\r\n\r\nfunction lightMode() {\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('html').removeClass('dark');\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#dark-mode').addClass('hidden');\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#light-mode').removeClass('hidden');\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#ssps-logo').attr('src', '../../assets/logo-siu.png');\r\n  localStorage.setItem('darkMode', 'false');\r\n}\r\n\r\nfunction darkMode() {\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('html').addClass('dark');\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#light-mode').addClass('hidden');\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#dark-mode').removeClass('hidden');\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#ssps-logo').attr('src', '../../assets/logo-siu.png');\r\n  localStorage.setItem('darkMode', 'true');\r\n}\r\n\r\n/* Open detailed user card */\r\njquery__WEBPACK_IMPORTED_MODULE_1___default()('#user-card').on('click', function () {\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#user-card-expanded')\r\n    .removeClass(\r\n      'duration-[150ms] ease-m3-standard-accelerate invisible opacity-0 rounded-lg scale-y-90',\r\n    )\r\n    .addClass(\r\n      'duration-[250ms] ease-m3-standard-decelerate translate-y-10 opacity-100 rounded-3xl pb-6 pt-2',\r\n    );\r\n});\r\n\r\n/* Close detailed user card */\r\njquery__WEBPACK_IMPORTED_MODULE_1___default()('#user-card-expanded-close').on('click', function () {\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#user-card-expanded')\r\n    .removeClass(\r\n      'duration-[250ms] ease-m3-standard-decelerate translate-y-10 opacity-100 rounded-3xl pb-6 pt-2',\r\n    )\r\n    .addClass(\r\n      'duration-[150ms] ease-m3-standard-accelerate invisible opacity-0 rounded-lg scale-y-90',\r\n    );\r\n});\r\n\r\n/* enable dark mode */\r\njquery__WEBPACK_IMPORTED_MODULE_1___default()('#light-mode').on('click', function () {\r\n  darkMode();\r\n});\r\n\r\n/* enable light mode */\r\njquery__WEBPACK_IMPORTED_MODULE_1___default()('#dark-mode').on('click', function () {\r\n  lightMode();\r\n});\r\n\r\n/* buy more pages */\r\njquery__WEBPACK_IMPORTED_MODULE_1___default()('#add-pages').on('click', function () {\r\n  window.location.href = './buy.html';\r\n});\r\n\r\n/* handle upload button event */\r\njquery__WEBPACK_IMPORTED_MODULE_1___default()('[id=uploadButton]').on('click', () => {\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#fileInput').trigger('click');\r\n});\r\n\r\njquery__WEBPACK_IMPORTED_MODULE_1___default()('#fileInput').on('change', async function () {\r\n  /* eslint-disable no-invalid-this */\r\n  (0,_home_js__WEBPACK_IMPORTED_MODULE_2__.fileUpload)(this.files[0]);\r\n});\r\n\r\n/* log out of the service */\r\njquery__WEBPACK_IMPORTED_MODULE_1___default()('#logout').on('click', function () {\r\n  // logOut();\r\n  localStorage.clear();\r\n  window.location.href = './login.html';\r\n});\r\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://ssps-client/./src/scripts/index.js?");

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["src_scripts_home_js"], () => (__webpack_exec__("./src/scripts/index.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);