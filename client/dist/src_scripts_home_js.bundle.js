"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkssps_client"] = self["webpackChunkssps_client"] || []).push([["src_scripts_home_js"],{

/***/ "./src/scripts/home.js":
/*!*****************************!*\
  !*** ./src/scripts/home.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fileUpload: () => (/* binding */ fileUpload),\n/* harmony export */   loadHistory: () => (/* binding */ loadHistory),\n/* harmony export */   loadQueue: () => (/* binding */ loadQueue)\n/* harmony export */ });\n/* harmony import */ var pdfjs_dist_webpack_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pdfjs-dist/webpack.mjs */ \"./node_modules/pdfjs-dist/webpack.mjs\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pdfjs_dist_webpack_mjs__WEBPACK_IMPORTED_MODULE_0__]);\npdfjs_dist_webpack_mjs__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* eslint-disable require-jsdoc */\r\n\r\n\r\n// import printJS from 'print-js';\r\nconst url = localStorage.getItem('url');\r\n\r\nlet dropZone;\r\n\r\nfunction fileUpload(file) {\r\n  if (window.location.href.indexOf('home') === -1) {\r\n    window.location.href = './home.html';\r\n  }\r\n  dropZone = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#drop-zone').clone();\r\n  // let printers = [];\r\n  // get printers\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default().get(url + '/spso/printer/')\r\n    .done(function (data) {\r\n      // console.log(data);\r\n      if (data.data.length == 0) {\r\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print').attr(\r\n          'class',\r\n          'items inline-flex gap-x-1 rounded-full bg-[#4d69b2] px-5 py-2.5 text-center text-white shadow-1 transition ease-out dark:bg-button-primary-dark cursor-not-allowed',\r\n        );\r\n        const errorDiv = `\r\n        <div class=\"px-3 py-2 bg-red-200 dark:bg-red-900 mix-blend-multiply dark:mix-blend-lighten rounded-full flex flex-row space-x-5 items-center\">\r\n          <svg class=\"self-center\" xmlns=\"http://www.w3.org/2000/svg\" height=\"32\" viewBox=\"0 -960 960 960\" width=\"32\">\r\n            <path fill=\"#B3261E\" d=\"M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z\"></path>\r\n          </svg>\r\n          <p>Không tìm thấy máy in nào</p>\r\n        </div>\r\n        `;\r\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#drop-zone').append(errorDiv);\r\n      } else {\r\n        const printerList = data.data;\r\n        printerList.forEach((element) => {\r\n          if (element.printerStatus) {\r\n            const printerDiv =\r\n              `\r\n              <div class=\"flex flex-row items-center space-x-2\">\r\n                <input\r\n                  id=\"` +\r\n              element.location +\r\n              `\"\r\n                  type=\"radio\"\r\n                  value=\"` +\r\n              element._id +\r\n              `\"\r\n                  name=\"printer-select\"\r\n                  class=\"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600\"\r\n                />\r\n                <label for=\"` +\r\n              element.location +\r\n              `\">` +\r\n              element.location +\r\n              `</label>\r\n              </div>\r\n            `;\r\n            jquery__WEBPACK_IMPORTED_MODULE_1___default()('#printer-list').append(printerDiv);\r\n          }\r\n        });\r\n      }\r\n    })\r\n    .fail(function (xhr, status, error) {\r\n      // console.log(xhr);\r\n      const errorCode = xhr.status;\r\n      const errorMessage = xhr.responseJSON.error.message;\r\n      window.location.href =\r\n        './error.html?num=' + errorCode + '&msg=' + errorMessage;\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#error-code').html(errorCode);\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#error-description').html(errorMessage);\r\n    });\r\n\r\n  const uploaded = `\r\n  <div\r\n    id=\"drop-zone\"\r\n    class=\"flex-col space-y-5 rounded-3xl bg-card-background p-6 text-left transition-transform dark:bg-card-background-dark sm:p-8\"\r\n  >\r\n    <div class=\"flex flex-row items-center space-x-5\">\r\n      <p class=\"text-2xl font-bold\">PDF</p>\r\n      <div class=\"flex flex-col\" id=\"upload-document-properties\">\r\n        <div\r\n          class=\"mb-2 h-5 w-60 animate-pulse rounded-full bg-gray-300\"\r\n        ></div>\r\n        <div\r\n          class=\"h-4 w-36 animate-pulse rounded-full bg-gray-300\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n    <form class=\"flex flex-col space-y-3\">\r\n      <p>Chọn địa điểm</p>\r\n      <div class=\"flex flex-col space-y-3\" id=\"printer-list\">\r\n      </div>\r\n    </form>\r\n    <div\r\n      class=\"flex flex-col rounded-xl p-3 shadow-1 transition hover:shadow-3\"\r\n    >\r\n      <div\r\n        class=\"flex cursor-pointer flex-col\"\r\n        id=\"expand-print-options\"\r\n      >\r\n        <div class=\"flex flex-row items-center justify-between\">\r\n          <p>Tùy chọn in</p>\r\n          <button\r\n            class=\"rotate-180 items-center transition-transform\"\r\n            id=\"expand-print-options-arrow\"\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              height=\"24\"\r\n              viewBox=\"0 -960 960 960\"\r\n              width=\"24\"\r\n              class=\"dark:fill-dark-surface\"\r\n            >\r\n              <path\r\n                d=\"m296-345-56-56 240-240 240 240-56 56-184-184-184 184Z\"\r\n              />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <form\r\n        class=\"invisible grid max-h-0 grid-cols-1 items-center space-y-2 rounded-xl bg-card-background align-middle opacity-0 transition-all duration-300 ease-in-out dark:bg-card-background-dark sm:grid-cols-2 xl:grid-cols-4 xl:gap-x-3\"\r\n        id=\"print-options\"\r\n      >\r\n        <hr class=\"col-span-full mt-2\" />\r\n        <label\r\n          for=\"print-options-orientation\"\r\n          class=\"my-2 block text-sm\"\r\n        >\r\n          Hướng</label\r\n        >\r\n        <select\r\n          id=\"print-options-orientation\"\r\n          class=\"block w-full rounded-lg border-0 bg-gray-100 p-2.5 text-sm text-gray-900 mix-blend-multiply focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:text-dark-surface dark:mix-blend-screen\"\r\n        >\r\n          <option selected value=\"portrait\">Dọc</option>\r\n          <option value=\"landscape\">Ngang</option>\r\n        </select>\r\n        <label for=\"print-options-copies\" class=\"mb-2 block text-sm\">\r\n          Bản sao</label\r\n        >\r\n        <input \r\n          id=\"print-options-copies\"\r\n          type=\"number\"\r\n          min=\"1\"\r\n          value=\"1\"\r\n          class=\"block w-full rounded-lg border-0 bg-gray-100 p-2.5 text-sm text-gray-900 mix-blend-multiply focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:text-dark-surface dark:mix-blend-screen\"\r\n        />\r\n        <label for=\"print-options-size\" class=\"mb-2 block text-sm\">\r\n          Khổ giấy</label\r\n        >\r\n        <select\r\n          id=\"print-options-size\"\r\n          class=\"block w-full rounded-lg border-0 bg-gray-100 p-2.5 text-sm text-gray-900 mix-blend-multiply focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:text-dark-surface dark:mix-blend-screen\"\r\n        >\r\n          <option value=\"A0\">A0</option>\r\n          <option value=\"A1\">A1</option>\r\n          <option value=\"A2\">A2</option>\r\n          <option value=\"A3\">A3</option>\r\n          <option selected value=\"A4\">A4</option>\r\n          <option value=\"A5\">A5</option>\r\n          <option value=\"A6\">A6</option>\r\n          <option value=\"A7\">A7</option>\r\n        </select>\r\n        <label\r\n          for=\"print-options-pages-per-side\"\r\n          class=\"mb-2 block text-sm\"\r\n        >\r\n          Số tờ mỗi mặt</label\r\n        >\r\n        <select\r\n          id=\"print-options-pages-per-side\"\r\n          class=\"block w-full rounded-lg border-0 bg-gray-100 p-2.5 text-sm text-gray-900 mix-blend-multiply focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:text-dark-surface dark:mix-blend-screen\"\r\n        >\r\n          <option selected value=\"1\">1</option>\r\n          <option value=\"2\">2</option>\r\n        </select>\r\n        <hr class=\"col-span-full mt-2\" />\r\n        <div class=\"flex flex-row space-x-3 items-center py-1\">\r\n          <input id=\"print-options-sided\" type=\"checkbox\" value=\"\" class=\"w-4 h-4 text-blue-primary bg-gray-100 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600\" >\r\n          <label for=\"print-options-sided\" class=\"ms-2 text-sm\">In hai mặt</label>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div class=\"flex w-full flex-row items-center justify-between\">\r\n      <button\r\n        type=\"button\"\r\n        class=\"items inline-flex gap-x-3 rounded-full px-6 py-2.5 text-center text-black shadow-1 transition ease-out hover:bg-button-hover hover:shadow-3 active:bg-button-active dark:bg-button-dark dark:text-dark-surface dark:hover:bg-button-hover-dark dark:active:bg-button-active-dark\"\r\n        id=\"cancel-print\"\r\n      >\r\n        Hủy\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        class=\"items inline-flex gap-x-1 rounded-full bg-button-primary px-5 py-2.5 text-center text-white shadow-1 transition ease-out hover:bg-button-primary-hover hover:shadow-3 active:bg-button-primary-active dark:bg-button-primary-dark dark:hover:bg-button-primary-hover-dark dark:active:bg-button-primary-active-dark\"\r\n        id=\"print\"\r\n        >\r\n        Tiến hành in\r\n      </button>\r\n    </div>\r\n  </div>\r\n        `;\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#drop-zone').replaceWith(uploaded);\r\n\r\n  // event handlers\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#cancel-print').on('click', () => {\r\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#drop-zone').replaceWith(dropZone.clone());\r\n  });\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print').on('click', () => {\r\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#drop-zone').replaceWith(dropZone.clone());\r\n  });\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#expand-print-options').on('click', () => {\r\n    if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options').hasClass('invisible')) {\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options')\r\n        .removeClass('invisible max-h-0 opacity-0')\r\n        .addClass('max-h-[1000px] opacity-100');\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#expand-print-options-arrow').removeClass('rotate-180');\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#expand-print-options-arrow').addClass('rotate-0');\r\n    } else {\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options')\r\n        .addClass('invisible max-h-0 opacity-0')\r\n        .removeClass('max-h-[1000px] opacity-100');\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#expand-print-options-arrow').removeClass('rotate-0');\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#expand-print-options-arrow').addClass('rotate-180');\r\n    }\r\n  });\r\n  const fileURL = URL.createObjectURL(file);\r\n  const pageSizes = {\r\n    A0: { width: 841, height: 1190 },\r\n    A1: { width: 594, height: 841 },\r\n    A2: { width: 420, height: 594 },\r\n    A3: { width: 297, height: 420 },\r\n    A4: { width: 210, height: 297 },\r\n    A5: { width: 148, height: 210 },\r\n    A6: { width: 105, height: 148 },\r\n    A7: { width: 74, height: 105 },\r\n  };\r\n\r\n  //lấy giá trị user.remainingPages bên index.js\r\n  const remainingPages = parseInt(\r\n    document.getElementById('user-remaining-pages').getAttribute('data-remaining-pages'), \r\n    10,\r\n  );\r\n\r\n  document.getElementById('print-options-copies').addEventListener('input', (event) => {\r\n    const inputValue = parseInt(event.target.value, 10);\r\n    if (inputValue > remainingPages)\r\n    {\r\n      alert(`Bạn chỉ có ${remainingPages} trang còn lại!`);\r\n      event.target.value = remainingPages;\r\n    }\r\n  });\r\n\r\n  /* add file properties & verify file extensions */\r\n  let filePages;\r\n  const fname = file.name;\r\n  const re = /(\\.pdf|\\.pdf)$/i;\r\n  if (!re.exec(fname)) {\r\n    throw new Error(\r\n      'File type not supported! Please consult the help articles for more information.',\r\n    );\r\n  }\r\n  pdfjs_dist_webpack_mjs__WEBPACK_IMPORTED_MODULE_0__.getDocument(fileURL).promise.then((document) => {\r\n    filePages = document.numPages;\r\n    let oldSize = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-size').val();\r\n    let oldPerSheet = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-pages-per-side').val();\r\n    let data = {\r\n      printer: '',\r\n      note: 'some note',\r\n      fileName: file.name,\r\n      printProperties: {\r\n        paperSize: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-size').val(),\r\n        numberOfPages: String(Math.ceil(filePages)),\r\n        sided: String(jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-sided').prop('checked')),\r\n        copies: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-copies').val(),\r\n      },\r\n    };\r\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options').trigger('reset');\r\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-pages-per-side').on('change', function () {\r\n      // Get the value of the selected radio button\r\n      const selectedValue = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-pages-per-side').val();\r\n      filePages = (filePages * oldPerSheet) / selectedValue;\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#upload-document-properties').html(\r\n        '<p>' +\r\n          file.name +\r\n          '</p><p>' +\r\n          formatBytes(file.size, 2) +\r\n          ' • ' +\r\n          Math.ceil(filePages) +\r\n          ' trang</p>',\r\n      );\r\n      oldPerSheet = selectedValue;\r\n      data.printProperties.numberOfPages = String(Math.ceil(filePages));\r\n    });\r\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('input[name=\"printer-select\"]').on('change', function () {\r\n      data.printer = jquery__WEBPACK_IMPORTED_MODULE_1___default()('input[name=\"printer-select\"]:checked').val();\r\n    });\r\n\r\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-size').on('change', function () {\r\n      const selectedValue = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-size').val();\r\n      filePages =\r\n        (filePages * pageSizes[oldSize].width * pageSizes[oldSize].height) /\r\n        (pageSizes[selectedValue].width * pageSizes[selectedValue].height);\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#upload-document-properties').html(\r\n        '<p>' +\r\n          file.name +\r\n          '</p><p>' +\r\n          formatBytes(file.size, 2) +\r\n          ' • ' +\r\n          Math.ceil(filePages) +\r\n          ' trang</p>',\r\n      );\r\n      oldSize = selectedValue;\r\n      data.printProperties.paperSize = oldSize;\r\n      data.printProperties.numberOfPages = String(Math.ceil(filePages));\r\n    });\r\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-copies').on('change', function () {\r\n      data.copies = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-copies').val();\r\n    });\r\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-sided').on('change', function () {\r\n      const checkboxValue = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-sided').prop('checked');\r\n      if (checkboxValue) {\r\n        filePages = filePages / 2;\r\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#upload-document-properties').html(\r\n          '<p>' +\r\n            file.name +\r\n            '</p><p>' +\r\n            formatBytes(file.size, 2) +\r\n            ' • ' +\r\n            Math.ceil(filePages) +\r\n            ' trang</p>',\r\n        );\r\n      } else {\r\n        filePages = filePages * 2;\r\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#upload-document-properties').html(\r\n          '<p>' +\r\n            file.name +\r\n            '</p><p>' +\r\n            formatBytes(file.size, 2) +\r\n            ' • ' +\r\n            Math.ceil(filePages) +\r\n            ' trang</p>',\r\n        );\r\n      }\r\n      data.printProperties.sided = String(\r\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print-options-sided').prop('checked'),\r\n      );\r\n    });\r\n\r\n    // console.log(filePages);\r\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#upload-document-properties').html(\r\n      '<p>' +\r\n        file.name +\r\n        '</p><p>' +\r\n        formatBytes(file.size, 2) +\r\n        ' • ' +\r\n        filePages +\r\n        ' trang</p>',\r\n    );\r\n    uploadFile(file, data);\r\n  });\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('html, body').animate({ scrollTop: 0 }, 'fast');\r\n}\r\n\r\nfunction formatBytes(bytes, decimals = 2) {\r\n  if (!+bytes) return '0 Bytes';\r\n  const k = 1024;\r\n  const dm = decimals < 0 ? 0 : decimals;\r\n  const sizes = [\r\n    'Bytes',\r\n    'KiB',\r\n    'MiB',\r\n    'GiB',\r\n    'TiB',\r\n    'PiB',\r\n    'EiB',\r\n    'ZiB',\r\n    'YiB',\r\n  ];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\r\n}\r\n\r\nfunction loadQueue() {\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default().get(url + '/account/printorders')\r\n    .done(function (data) {\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#queue-content').html('');\r\n      if (data.length == 0) {\r\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#queue-content').html('Bạn không có mục nào trong hàng đợi.');\r\n      }\r\n      if (window.location.href.indexOf('home') !== -1) {\r\n        // console.log(data);\r\n        let count = 0;\r\n        data.forEach((element) => {\r\n          if (count < 4) {\r\n            if (!element.status) {\r\n              count++;\r\n              jquery__WEBPACK_IMPORTED_MODULE_1___default().get(url + '/spso/printer/' + element.printer).done(\r\n                function (data) {\r\n                  const fileName = element.fileName;\r\n                  const queueLocation = data.data.location;\r\n                  const queueStatus =\r\n                    element.status === 'true' ? 'Đã in' : 'Đang xử lý';\r\n                  let queueETA =\r\n                    Date.parse(element.estimatedEndTime) - Date.now();\r\n                  if (queueETA < 0) queueETA = 0;\r\n                  const queueItem =\r\n                    `\r\n                      <div\r\n                        class=\"flex w-full items-center py-1 max-md:flex-wrap max-md:justify-between md:flex-row md:space-x-2\"\r\n                      >\r\n                        <p class=\"w-3/4 min-w-0 truncate md:w-full\">` +\r\n                    fileName +\r\n                    `</p>\r\n                        <a\r\n                          href=\"\"\r\n                          class=\"my-auto w-14 shrink-0 justify-end text-right md:order-5 xl:w-16 2xl:w-20\"\r\n                          >Hủy</a\r\n                        >\r\n                        <div\r\n                          class=\"flex w-full flex-row space-x-2 max-md:text-sm md:max-w-max\"\r\n                        >\r\n                          <p class=\"shrink-0 truncate md:w-24 xl:w-28 2xl:w-32\">` +\r\n                    queueLocation +\r\n                    `</p>\r\n                          <div class=\"md:hidden\">•</div>\r\n                          <p class=\"w-28 shrink-0 truncate xl:w-32 2xl:w-36\">` +\r\n                    queueStatus +\r\n                    `</p>\r\n                          <p class=\"w-24 shrink-0 truncate max-md:hidden xl:w-28 2xl:w-32\">\r\n                            ` +\r\n                    queueETA +\r\n                    `\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    `;\r\n                  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#queue-content').append(queueItem);\r\n                  // console.log(queueItem);\r\n                },\r\n              );\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        data.forEach((element) => {\r\n          if (!element.status) {\r\n            jquery__WEBPACK_IMPORTED_MODULE_1___default().get(url + '/spso/printer/' + element.printer).done(\r\n              function (data) {\r\n                const fileName = element.fileName;\r\n                const queueLocation = data.data.location;\r\n                const queueStatus =\r\n                  element.status === 'true' ? 'Đã in' : 'Đang xử lý';\r\n                let queueETA =\r\n                  Date.parse(element.estimatedEndTime) - Date.now();\r\n                if (queueETA < 0) queueETA = 0;\r\n                const queueItem =\r\n                  `\r\n                  <div\r\n                    class=\"flex w-full items-center py-1 max-md:flex-wrap max-md:justify-between md:flex-row md:space-x-2\"\r\n                  >\r\n                    <p class=\"w-3/4 min-w-0 truncate md:w-full\">` +\r\n                  fileName +\r\n                  `</p>\r\n                    <a\r\n                      href=\"\"\r\n                      class=\"my-auto w-14 shrink-0 justify-end text-right md:order-5 xl:w-16 2xl:w-20\"\r\n                      >Hủy</a\r\n                    >\r\n                    <div\r\n                      class=\"flex w-full flex-row space-x-2 max-md:text-sm md:max-w-max\"\r\n                    >\r\n                      <p class=\"shrink-0 truncate md:w-24 xl:w-28 2xl:w-32\">` +\r\n                  queueLocation +\r\n                  `</p>\r\n                      <div class=\"md:hidden\">•</div>\r\n                      <p class=\"w-28 shrink-0 truncate xl:w-32 2xl:w-36\">` +\r\n                  queueStatus +\r\n                  `</p>\r\n                      <p class=\"w-24 shrink-0 truncate max-md:hidden xl:w-28 2xl:w-32\">\r\n                        ` +\r\n                  queueETA +\r\n                  `\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                `;\r\n                jquery__WEBPACK_IMPORTED_MODULE_1___default()('#queue-content').append(queueItem);\r\n                // console.log(queueItem);\r\n              },\r\n            );\r\n          }\r\n        });\r\n      }\r\n    })\r\n    .fail(() => {\r\n      const errorDiv = `\r\n      <div class=\"px-3 py-2 bg-red-200 dark:bg-red-900 mix-blend-multiply dark:mix-blend-lighten rounded-full flex flex-row space-x-5 items-center\" id=\"error-div\">\r\n        <svg class=\"self-center\" xmlns=\"http://www.w3.org/2000/svg\" height=\"32\" viewBox=\"0 -960 960 960\" width=\"32\">\r\n          <path fill=\"#B3261E\" d=\"M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z\"></path>\r\n        </svg>\r\n        <p>Đã xảy ra lỗi khi tải hàng đợi. Vui lòng thử lại sau hoặc liên hệ bộ phận hỗ trợ.</p>\r\n      </div>\r\n    `;\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#queue').append(errorDiv);\r\n    });\r\n}\r\n\r\nfunction loadHistory() {\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default().get(url + '/account/printorders')\r\n    .done(function (data) {\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#history-content').html('');\r\n      if (data.length == 0) {\r\n        // $('#history-content').html('Bạn không có mục nào trong lịch sử.');\r\n      }\r\n      if (window.location.href.indexOf('home') !== -1) {\r\n        let str = '';\r\n        let check = false;\r\n        let count = 0;\r\n        for (let i = data.length - 1; i >= 0; i--) {\r\n          if (data[i].status === true) {\r\n            if (count < 4) {\r\n              let element = data[i];\r\n              check = true;\r\n              count++;\r\n\r\n              jquery__WEBPACK_IMPORTED_MODULE_1___default().get(url + '/spso/printer/' + element.printer)\r\n                .done(function (data) {\r\n                  const fileName = element.fileName;\r\n                  const historyLocation = data.data.location;\r\n                  const historyPages = element.printProperties.numberOfPages;\r\n                  const historyTime = new Date(element.beginTime);\r\n                  const historyTimeString = historyTime.toDateString();\r\n                  // const queueETA = element.beginTime;\r\n                  const historyItem =\r\n                    `\r\n                  <div\r\n                  class=\"flex w-full items-center py-1 max-md:flex-wrap max-md:justify-between md:flex-row md:space-x-2\"\r\n                >\r\n                  <p class=\"grow min-w-0 truncate md:w-full\">\r\n                    ` +\r\n                    fileName +\r\n                    `\r\n                  </p>\r\n                  <div class=\"w-2 shrink-0 md:hidden\"></div>\r\n                  <p\r\n                    class=\"w-40 shrink-0 truncate max-md:text-right md:order-3 xl:w-44 2xl:w-48\"\r\n                  >\r\n                  ` +\r\n                    historyTimeString +\r\n                    `\r\n                  </p>\r\n                  <div\r\n                    class=\"flex w-full flex-row space-x-2 max-md:text-sm md:max-w-max\"\r\n                  >\r\n                    <p class=\"shrink-0 truncate md:w-24 xl:w-28 2xl:w-32\">` +\r\n                    historyLocation +\r\n                    `</p>\r\n                    <div class=\"md:hidden\">•</div>\r\n                    <p class=\"w-28 shrink-0 truncate xl:w-32 2xl:w-36\">` +\r\n                    historyPages +\r\n                    ` trang</p>\r\n                  </div>\r\n                </div>`;\r\n                  str = historyItem + str;\r\n                })\r\n                .then(() => {\r\n                  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#history-content').html(str);\r\n                });\r\n            }\r\n          }\r\n        }\r\n        if (check == false) {\r\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('#history-content').append('Bạn không có mục nào trong lịch sử.');\r\n        }\r\n      } else {\r\n        let check = false;\r\n        data.forEach((element) => {\r\n          if (element.status === true) {\r\n            check = true;\r\n            jquery__WEBPACK_IMPORTED_MODULE_1___default().get(url + '/spso/printer/' + element.printer).done(\r\n              function (data) {\r\n                const fileName = element.fileName;\r\n                const historyLocation = data.data.location;\r\n                const historyPages = element.printProperties.numberOfPages;\r\n                const historyTime = new Date(element.beginTime);\r\n                const historyTimeString = historyTime.toDateString();\r\n                // const queueETA = element.beginTime;\r\n                const historyItem =\r\n                  `\r\n                <div\r\n                class=\"flex w-full items-center py-1 max-md:flex-wrap max-md:justify-between md:flex-row md:space-x-2\"\r\n              >\r\n                <p class=\"grow min-w-0 truncate md:w-full\">\r\n                  ` +\r\n                  fileName +\r\n                  `\r\n                </p>\r\n                <div class=\"w-2 shrink-0 md:hidden\"></div>\r\n                <p\r\n                  class=\"w-40 shrink-0 truncate max-md:text-right md:order-3 xl:w-44 2xl:w-48\"\r\n                >\r\n                ` +\r\n                  historyTimeString +\r\n                  `\r\n                </p>\r\n                <div\r\n                  class=\"flex w-full flex-row space-x-2 max-md:text-sm md:max-w-max\"\r\n                >\r\n                  <p class=\"shrink-0 truncate md:w-24 xl:w-28 2xl:w-32\">` +\r\n                  historyLocation +\r\n                  `</p>\r\n                  <div class=\"md:hidden\">•</div>\r\n                  <p class=\"w-28 shrink-0 truncate xl:w-32 2xl:w-36\">` +\r\n                  historyPages +\r\n                  ` trang</p>\r\n                </div>\r\n              </div>`;\r\n                // const historyItem =\r\n                //   `\r\n                //     <div\r\n                //       class=\"flex w-full items-center py-1 max-md:flex-wrap max-md:justify-between md:flex-row md:space-x-2\"\r\n                //     >\r\n                //       <p class=\"w-3/4 min-w-0 truncate md:w-full\">` +\r\n                //   fileName +\r\n                //   `</p>\r\n                //       <a\r\n                //         href=\"\"\r\n                //         class=\"my-auto w-14 shrink-0 justify-end text-right md:order-5 xl:w-16 2xl:w-20\"\r\n                //         >Hủy</a\r\n                //       >\r\n                //       <div\r\n                //         class=\"flex w-full flex-row space-x-2 max-md:text-sm md:max-w-max\"\r\n                //       >\r\n                //         <p class=\"shrink-0 truncate md:w-24 xl:w-28 2xl:w-32\">` +\r\n                //   historyLocation +\r\n                //   `</p>\r\n                //         <div class=\"md:hidden\">•</div>\r\n                //         <p class=\"w-28 shrink-0 truncate xl:w-32 2xl:w-36\">` +\r\n                //   historyStatus +\r\n                //   `</p>\r\n                //         <p class=\"w-24 shrink-0 truncate max-md:hidden xl:w-28 2xl:w-32\">\r\n                //         ${new Date(element.beginTime).getDate()}/${\r\n                //           new Date(element.beginTime).getMonth() + 1\r\n                //         }/${new Date(element.beginTime).getFullYear()}\r\n                //         </p>\r\n                //       </div>\r\n                //     </div>\r\n                //   `;\r\n                jquery__WEBPACK_IMPORTED_MODULE_1___default()('#history-content').append(historyItem);\r\n                // console.log(queueItem);\r\n              },\r\n            );\r\n          }\r\n        });\r\n        if (check === false) {\r\n          jquery__WEBPACK_IMPORTED_MODULE_1___default()('#history-content').append('Bạn không có mục nào trong lịch sử.');\r\n        }\r\n      }\r\n      // console.log(data);\r\n    })\r\n    .fail(function (xhr, status, error) {\r\n      // const errorCode = xhr.status;\r\n      // const errorMessage = xhr.responseJSON.error.message;\r\n      // window.location.href =\r\n      //   './error.html?num=' + errorCode + '&msg=' + errorMessage;\r\n      // $('#error-code').html(errorCode);\r\n      // $('#error-description').html(errorMessage);\r\n      const errorDiv = `\r\n      <div class=\"px-3 py-2 bg-red-200 dark:bg-red-900 mix-blend-multiply dark:mix-blend-lighten rounded-full flex flex-row space-x-5 items-center\" id=\"error-div\">\r\n        <svg class=\"self-center\" xmlns=\"http://www.w3.org/2000/svg\" height=\"32\" viewBox=\"0 -960 960 960\" width=\"32\">\r\n          <path fill=\"#B3261E\" d=\"M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z\"></path>\r\n        </svg>\r\n        <p>Đã xảy ra lỗi khi tải lịch sử. Vui lòng thử lại sau hoặc liên hệ bộ phận hỗ trợ.</p>\r\n      </div>\r\n    `;\r\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#history').append(errorDiv);\r\n    });\r\n}\r\n\r\n// load queue and history on page load\r\njquery__WEBPACK_IMPORTED_MODULE_1___default()(() => {\r\n  loadQueue();\r\n  loadHistory();\r\n});\r\n\r\nfunction uploadFile(file, data) {\r\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#print').on('click', (e) => {\r\n    e.preventDefault();\r\n    let id;\r\n\r\n    jquery__WEBPACK_IMPORTED_MODULE_1___default().post(url + '/printorder/', JSON.stringify(data))\r\n      .done(function (data) {\r\n        id = data.newOrderData.data.orderID;\r\n      })\r\n      .then(() => {\r\n        var formData = new FormData();\r\n        formData.append('printFile', file);\r\n        jquery__WEBPACK_IMPORTED_MODULE_1___default().ajax({\r\n          type: 'POST',\r\n          url: url + '/printorder/upload/' + id,\r\n          data: formData,\r\n          processData: false,\r\n          contentType: false,\r\n        })\r\n          .done(function (uploadData) {\r\n            window.location.reload();\r\n          })\r\n          .fail(function (xhr, status, error) {\r\n            console.error(status, error);\r\n          });\r\n      })\r\n      .fail(function (xhr, status, error) {\r\n        console.error(status, error);\r\n      });\r\n  });\r\n}\r\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://ssps-client/./src/scripts/home.js?");

/***/ }),

/***/ "./node_modules/pdfjs-dist/webpack.mjs":
/*!*********************************************!*\
  !*** ./node_modules/pdfjs-dist/webpack.mjs ***!
  \*********************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbortException: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.AbortException),\n/* harmony export */   AnnotationEditorLayer: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorLayer),\n/* harmony export */   AnnotationEditorParamsType: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorParamsType),\n/* harmony export */   AnnotationEditorType: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType),\n/* harmony export */   AnnotationEditorUIManager: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorUIManager),\n/* harmony export */   AnnotationLayer: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.AnnotationLayer),\n/* harmony export */   AnnotationMode: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode),\n/* harmony export */   CMapCompressionType: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.CMapCompressionType),\n/* harmony export */   DOMSVGFactory: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.DOMSVGFactory),\n/* harmony export */   DrawLayer: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.DrawLayer),\n/* harmony export */   FeatureTest: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.FeatureTest),\n/* harmony export */   GlobalWorkerOptions: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.GlobalWorkerOptions),\n/* harmony export */   ImageKind: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.ImageKind),\n/* harmony export */   InvalidPDFException: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.InvalidPDFException),\n/* harmony export */   MissingPDFException: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.MissingPDFException),\n/* harmony export */   OPS: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.OPS),\n/* harmony export */   Outliner: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.Outliner),\n/* harmony export */   PDFDataRangeTransport: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.PDFDataRangeTransport),\n/* harmony export */   PDFDateString: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.PDFDateString),\n/* harmony export */   PDFWorker: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.PDFWorker),\n/* harmony export */   PasswordResponses: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.PasswordResponses),\n/* harmony export */   PermissionFlag: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.PermissionFlag),\n/* harmony export */   PixelsPerInch: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.PixelsPerInch),\n/* harmony export */   PromiseCapability: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.PromiseCapability),\n/* harmony export */   RenderingCancelledException: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.RenderingCancelledException),\n/* harmony export */   UnexpectedResponseException: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.UnexpectedResponseException),\n/* harmony export */   Util: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.Util),\n/* harmony export */   VerbosityLevel: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.VerbosityLevel),\n/* harmony export */   XfaLayer: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.XfaLayer),\n/* harmony export */   build: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.build),\n/* harmony export */   createValidAbsoluteUrl: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.createValidAbsoluteUrl),\n/* harmony export */   fetchData: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.fetchData),\n/* harmony export */   getDocument: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.getDocument),\n/* harmony export */   getFilenameFromUrl: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.getFilenameFromUrl),\n/* harmony export */   getPdfFilenameFromUrl: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.getPdfFilenameFromUrl),\n/* harmony export */   getXfaPageViewport: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.getXfaPageViewport),\n/* harmony export */   isDataScheme: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.isDataScheme),\n/* harmony export */   isPdfFile: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.isPdfFile),\n/* harmony export */   noContextMenu: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.noContextMenu),\n/* harmony export */   normalizeUnicode: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.normalizeUnicode),\n/* harmony export */   renderTextLayer: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.renderTextLayer),\n/* harmony export */   setLayerDimensions: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.setLayerDimensions),\n/* harmony export */   shadow: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.shadow),\n/* harmony export */   updateTextLayer: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.updateTextLayer),\n/* harmony export */   version: () => (/* reexport safe */ _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.version)\n/* harmony export */ });\n/* harmony import */ var _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./build/pdf.mjs */ \"./node_modules/pdfjs-dist/build/pdf.mjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__]);\n_build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable import/no-unresolved */\n\n\n\nif (typeof window !== \"undefined\" && \"Worker\" in window) {\n  _build_pdf_mjs__WEBPACK_IMPORTED_MODULE_0__.GlobalWorkerOptions.workerPort = new Worker(\n    new URL(/* worker import */ __webpack_require__.p + __webpack_require__.u(\"vendors-node_modules_pdfjs-dist_build_pdf_worker_mjs\"), __webpack_require__.b),\n    { type: undefined }\n  );\n}\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://ssps-client/./node_modules/pdfjs-dist/webpack.mjs?");

/***/ })

}]);